



        VANTA.GLOBE({
         el: "#about",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00
    })
    

        let surveyData = [
            {
                name: "Jagyura Naula",
                gramPanchayat: "Gram Panchayat: Jagyura",
                latitude:  29.7470750000,
                longitude: 79.7430277778,
                height: "N/A",
                discharge: "N/A",
                photos: ["images/jagyura/naula/photo-1.jpg",
                "images/jagyura/naula/photo-2.jpg",
                "images/jagyura/naula/photo-3.jpg",
                "images/jagyura/naula/photo-4.jpg",
                "images/jagyura/naula/photo-5.jpg",
                "images/jagyura/naula/photo-6.jpg",
                "images/jagyura/naula/photo-7.jpg",
                "images/jagyura/naula/photo-8.jpg",
                "images/jagyura/naula/photo-9.jpg",
                "images/jagyura/naula/photo-10.jpg",
                "images/jagyura/naula/photo-11.jpg",
                "images/jagyura/naula/photo-12.jpg"]
            },
            {
                name: "Jagyura Spring",
                gramPanchayat: "Gram Panchayat: Jagyura",
                latitude:  29.746872,
                longitude: 79.743783,
                height: "1228m",
                discharge: "N/A",
                photos: ["images/jagyura/spring/photo-1.jpg",
                "images/jagyura/spring/photo-2.jpg",
                "images/jagyura/spring/photo-3.jpg",
                "images/jagyura/spring/photo-4.jpg"]
            },
            {
                name: "Gurlia Naula",
                gramPanchayat: "Gram Panchayat: Gorigad",
                latitude: 29.743352,
                longitude: 79.742864,
                height: "1278m",
                discharge: "0.0167 liter/second",
                photos: ["images/Gurlia/photo-1.jpg",
                "images/gurlia/photo-2.jpg",
                "images/gurlia/photo-3.jpg",
                "images/gurlia/photo-4.jpg",
                "images/gurlia/photo-5.jpg",
                "images/gurlia/photo-6.jpg",
                "images/gurlia/photo-7.jpg",
                "images/gurlia/photo-8.jpg",
                "images/gurlia/photo-9.jpg",
                "images/gurlia/photo-10.jpg",
                "images/gurlia/photo-11.jpg",
                "images/gurlia/photo-12.jpg",
                "images/gurlia/photo-13.jpg",
                "images/gurlia/photo-14.jpg",
                "images/gurlia/photo-15.jpg",
                "images/gurlia/photo-16.jpg",
                "images/gurlia/photo-17.jpg",
                "images/gurlia/photo-18.jpg",
                "images/gurlia/photo-19.jpg",
                "images/gurlia/photo-20.jpg",
                "images/gurlia/photo-21.jpg",
                "images/gurlia/photo-22.jpg",
                "images/gurlia/photo-23.jpg",
                "images/gurlia/photo-24.jpg"]
            },
            {
                name: "Dhargad Dhara",
                gramPanchayat: "Gram Panchayat: Panch Dev Gaon",
                latitude: 29.7410555556,
                longitude: 79.7406361111,
                height: "1364m",
                discharge: "0.333 liter/second",
                photos: ["images/dhargad/photo-1.jpg",
                "images/dhargad/photo-2.jpg",
                "images/dhargad/photo-3.jpg",
                "images/dhargad/photo-4.jpg",
                "images/dhargad/photo-5.jpg",
                "images/dhargad/photo-6.jpg",
                "images/dhargad/photo-7.jpg",
                "images/dhargad/photo-8.jpg",
                "images/dhargad/photo-9.jpg",]
            },
            {
                name: "Salia Naula",
                gramPanchayat: "Gram Panchayat: Okhali Sirot",
                latitude: 29.7424897,
                longitude: 79.1561147,
                height: "1258m",
                discharge: "0.0833 liter/second",
                photos: ["images/salia/photo-1.jpg",
                "images/salia/photo-2.jpg",
                "images/salia/photo-3.jpg",
                "images/salia/photo-4.jpg",
                "images/salia/photo-5.jpg",
                "images/salia/photo-6.jpg",
                "images/salia/photo-7.jpg",
                "images/salia/photo-8.jpg",
                "images/salia/photo-9.jpg",
                "images/salia/photo-10.jpg",
                "images/salia/photo-11.jpg",
                "images/salia/photo-12.jpg",
                "images/salia/photo-13.jpg",
                "images/salia/photo-14.jpg",
                "images/salia/photo-15.jpg"]
            },
            {
                name: "KARALA Naula",
                gramPanchayat: "Gram Panchayat: Karala",
                latitude: "No Data Available",
                longitude: "No Data Available",
                height: "No Data Available",
                discharge: "No Data Available",
                photos: ["No Data Available"]
            },
            {
                name: "MASKHET NAULA",
                gramPanchayat: "Gram Panchayat: Okhali Sirot",
                latitude: 29.744033,
                longitude: 79.754194,
                height: "1257m",
                discharge: "0.455 liter/second",
                photos: ["images/muskhet/photo-1.jpg",
                "images/muskhet/photo-2.jpg",
                "images/muskhet/photo-3.jpg",
                "images/muskhet/photo-4.jpg",
                "images/muskhet/photo-5.jpg",
                "images/muskhet/photo-6.jpg",
                "images/muskhet/photo-7.jpg",
                "images/muskhet/photo-8.jpg",
                "images/muskhet/photo-9.jpg"]
            },
            {
                name: "GHAR MATI DHARA (Bhaluda Tok)",
                gramPanchayat: "Gram Panchayat: Khol Seer",
                latitude: "No Data Available",
                longitude: "No Data Available",
                height: "No Data Available",
                discharge: "0.1667 liters per second",
                photos: ["images/ghar_mata/photo-1.jpg",
                        "images/ghar_mata/photo-2.jpg",
                        "images/ghar_mata/photo-3.jpg",
                        "images/ghar_mata/photo-4.jpg",
                        "images/ghar_mata/photo-5.jpg",
                        "images/ghar_mata/photo-6.jpg",
                        "images/ghar_mata/photo-7.jpg",
                        "images/ghar_mata/photo-8.jpg",
                        "images/ghar_mata/photo-9.jpg",
                        "images/ghar_mata/photo-10.jpg",
                        "images/ghar_mata/photo-11.jpg",
                        "images/ghar_mata/photo-12.jpg",
                        "images/ghar_mata/photo-13.jpg",
                        "images/ghar_mata/photo-14.jpg",
                        "images/ghar_mata/photo-15.jpg",
                        "images/ghar_mata/photo-16.jpg",
                        "images/ghar_mata/photo-17.jpg",
                        "images/ghar_mata/photo-18.jpg",
                        "images/ghar_mata/photo-19.jpg"
                ]
            },
            {
                name: "KATTURA DHARA (Raingaria Tok)",
                gramPanchayat: "Gram Panchayat: Sainj",
                latitude: "No Data Available",
                longitude: "No Data Available",
                height: "No Data Available",
                discharge: "0.05 liters per second",
                photos: ["images/kattura/photo-1.jpg",
                        "images/kattura/photo-2.jpg",
                        "images/kattura/photo-3.jpg",
                        "images/kattura/photo-4.jpg",
                        "images/kattura/photo-5.jpg",
                        "images/kattura/photo-6.jpg",
                        "images/kattura/photo-7.jpg",
                        "images/kattura/photo-8.jpg",
                        "images/kattura/photo-9.jpg",
                        "images/kattura/photo-10.jpg",
                        "images/kattura/photo-11.jpg",
                        "images/kattura/photo-12.jpg",
                        "images/kattura/photo-13.jpg",
                        "images/kattura/photo-14.jpg",
                        "images/kattura/photo-15.jpg",
                        "images/kattura/photo-16.jpg",
                        "images/kattura/photo-17.jpg",
                        "images/kattura/photo-18.jpg"
                ]
            },
            {
                name: "NAVAVA DAN GADHERA DHARA",
                gramPanchayat: "Gram Panchayat: Sainj",
                latitude: "No Data Available",
                longitude: "No Data Available",
                height: "No Data Available",
                discharge: "No Data Available",
                photos: ["No Data Available"]
            },
            {
                name: "GHORA NAULA",
                gramPanchayat: "Gram Panchayat: Baidi Baghar ",
                latitude: "No Data Available",
                longitude: "No Data Available",
                height: "No Data Available",
                discharge: "0.1111 liters per second",
                photos: ["images/ghora/photo-1.jpg",
                        "images/ghora/photo-2.jpg",
                        "images/ghora/photo-3.jpg",
                        "images/ghora/photo-4.jpg",
                        "images/ghora/photo-5.jpg",
                        "images/ghora/photo-6.jpg",
                        "images/ghora/photo-7.jpg",
                        "images/ghora/photo-8.jpg",
                        "images/ghora/photo-9.jpg",
                        "images/ghora/photo-10.jpg",
                        "images/ghora/photo-11.jpg",
                        "images/ghora/photo-12.jpg",
                        "images/ghora/photo-13.jpg",
                        "images/ghora/photo-14.jpg",
                        "images/ghora/photo-15.jpg",
                        "images/ghora/photo-16.jpg",
                        "images/ghora/photo-17.jpg",
                        "images/ghora/photo-18.jpg"
                ]
            },
            {
                name: "PARKHRT NAULA (Shanti Garh)",
                gramPanchayat: "Gram Panchayat: Parkhet Tok ",
                latitude: "No Data Available",
                longitude: "No Data Available",
                height: "No Data Available",
                discharge: "No Data Available",
                photos: ["No Data Available"]
            }
        ];

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : currentTheme === 'light' ? 'dark' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            const themeIcon = document.querySelector('.theme-icon');
            themeIcon.textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            const themeIcon = document.querySelector('.theme-icon');
            themeIcon.textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        }

        function updateActiveNavLink() {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');
            let currentSection = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (window.pageYOffset >= (sectionTop - 100)) {
                    currentSection = section.getAttribute('id');
                }
            });
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${currentSection}`) {
                    link.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', updateActiveNavLink);

        let currentCardData = null;
        let currentPhotoIndex = 0;
        let map = null;
        let baseMaps = {};

        function generateGallery() {
            const container = document.getElementById('carouselContainer');
            if (!container) return;
            container.innerHTML = '';
            surveyData.forEach((data, index) => {
                const card = createNaulaCard(data, index);
                container.appendChild(card);
            });
            
            // Initialize Vanilla Tilt.js on all carousel cards
            initializeTiltEffect();
        }

        function createNaulaCard(data, index) {
            const card = document.createElement('div');
            card.className = 'naula-card';
            card.setAttribute('data-tilt', '');
            card.setAttribute('data-tilt-max', '15');
            card.setAttribute('data-tilt-speed', '400');
            card.setAttribute('data-tilt-perspective', '1000');
            card.setAttribute('data-tilt-scale', '1.05');
            card.setAttribute('data-tilt-glare', '');
            card.setAttribute('data-tilt-max-glare', '0.3');
            
            const hasCoordinates = data.latitude !== null && data.longitude !== null && data.latitude !== "No Data Available";
            const mapButtonDisabled = !hasCoordinates ? 'disabled' : '';
            
            card.innerHTML = `
                <div class="card-header">
                    <h2 class="card-title">${data.name}</h2>
                    <p class="card-subtitle">üìç ${data.gramPanchayat}</p>
                </div>
                <div class="card-body">
                    <div class="info-row">
                        <span class="info-label">Latitude:</span>
                        <span class="info-value">${data.latitude !== null ? data.latitude : 'N/A'}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Longitude:</span>
                        <span class="info-value">${data.longitude !== null ? data.longitude : 'N/A'}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Height:</span>
                        <span class="info-value">${data.height}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Discharge:</span>
                        <span class="info-value">${data.discharge}</span>
                    </div>
                </div>
                <div class="card-buttons">
                    <button class="view-photos-btn" onclick="openPhotoModal(${index})">üì∏ Photos</button>
                    <button class="view-map-btn" onclick="openMapModal(${index})" ${mapButtonDisabled}>üó∫Ô∏è Map</button>
                </div>
            `;
            return card;
        }

        // Initialize Vanilla Tilt.js effect on all cards
        function initializeTiltEffect() {
            const cards = document.querySelectorAll('.naula-card');
            VanillaTilt.init(cards, {
                reverse: false,
                max: 15,
                speed: 400,
                perspective: 1000,
                scale: 1.05,
                transition: true,
                glare: true,
                'max-glare': 0.3,
                gyroscope: true
            });
        }

        function openPhotoModal(index) {
            currentCardData = surveyData[index];
            currentPhotoIndex = 0;
            const modal = document.getElementById('photoModal');
            document.getElementById('modalTitle').textContent = currentCardData.name;
            document.getElementById('modalMetadata').textContent = `${currentCardData.gramPanchayat} | Survey Date: 8th Oct 2025`;
            updateModalImage();
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePhotoModal() {
            document.getElementById('photoModal').classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        function updateModalImage() {
            if (!currentCardData) return;
            const modalImage = document.getElementById('modalImage');
            const photoCounter = document.getElementById('photoCounter');
            modalImage.src = currentCardData.photos[currentPhotoIndex];
            modalImage.alt = `${currentCardData.name} - Photo ${currentPhotoIndex + 1}`;
            photoCounter.textContent = `Photo ${currentPhotoIndex + 1} of ${currentCardData.photos.length}`;
        }

        function navigatePhotos(direction) {
            if (!currentCardData) return;
            currentPhotoIndex += direction;
            if (currentPhotoIndex < 0) {
                currentPhotoIndex = currentCardData.photos.length - 1;
            } else if (currentPhotoIndex >= currentCardData.photos.length) {
                currentPhotoIndex = 0;
            }
            updateModalImage();
        }

        function openMapModal(index) {
            const data = surveyData[index];
            if (data.latitude === null || data.longitude === null || data.latitude === "No Data Available") {
                alert('GPS coordinates not available for this location.');
                return;
            }
            const modal = document.getElementById('mapModal');
            document.getElementById('mapModalTitle').textContent = data.name;
            document.getElementById('mapModalMetadata').textContent = `${data.gramPanchayat} | Coordinates: ${data.latitude}, ${data.longitude}`;
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
            setTimeout(() => { initializeMap(data); }, 100);
        }

        function closeMapModal() {
            document.getElementById('mapModal').classList.remove('show');
            document.body.style.overflow = 'auto';
            if (map) {
                map.remove();
                map = null;
            }
        }

        function initializeMap(data) {
            if (map) map.remove();
            const mapContainer = document.getElementById('mapContainer');
            mapContainer.innerHTML = '';
            map = L.map('mapContainer').setView([data.latitude, data.longitude], 15);
            baseMaps = {
                "Street Map": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }),
                "Satellite": L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { maxZoom: 19 }),
                "Topographic": L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', { maxZoom: 17 }),
                "Terrain": L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png', { maxZoom: 18 }),
                "Dark Mode": L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { maxZoom: 19 }),
                "Light Mode": L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { maxZoom: 19 })
            };
            baseMaps["Street Map"].addTo(map);
            L.control.layers(baseMaps, null, { position: 'topright', collapsed: false }).addTo(map);
            const customIcon = L.icon({
                iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
                shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',
                iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41]
            });
            const popupContent = `<div class="map-popup-content"><h3>${data.name}</h3><p><strong>Gram Panchayat:</strong> ${data.gramPanchayat}</p><p><strong>Coordinates:</strong> ${data.latitude}, ${data.longitude}</p><p><strong>Elevation:</strong> ${data.height}</p><p><strong>Discharge:</strong> ${data.discharge}</p></div>`;
            L.marker([data.latitude, data.longitude], { icon: customIcon }).addTo(map).bindPopup(popupContent).openPopup();
            L.circle([data.latitude, data.longitude], { color: '#00cec9', fillColor: '#74b9ff', fillOpacity: 0.2, radius: 100 }).addTo(map);
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            if (!searchInput) return;
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const cards = document.querySelectorAll('.naula-card');
                cards.forEach(card => {
                    const title = card.querySelector('.card-title').textContent.toLowerCase();
                    const gramPanchayat = card.querySelector('.card-subtitle').textContent.toLowerCase();
                    card.style.display = (title.includes(searchTerm) || gramPanchayat.includes(searchTerm)) ? 'block' : 'none';
                });
            });
        }

        function setupContactForm() {
            const form = document.getElementById('contactForm');
            if (!form) return;
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Thank you for your message! We will get back to you soon.');
                form.reset();
            });
        }

        document.addEventListener('keydown', (e) => {
            const photoModal = document.getElementById('photoModal');
            const mapModal = document.getElementById('mapModal');
            if (photoModal && photoModal.classList.contains('show')) {
                if (e.key === 'Escape') closePhotoModal();
                else if (e.key === 'ArrowLeft') navigatePhotos(-1);
                else if (e.key === 'ArrowRight') navigatePhotos(1);
            }
            if (mapModal && mapModal.classList.contains('show') && e.key === 'Escape') closeMapModal();
        });

        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            generateGallery();
            setupSearch();
            setupContactForm();
            updateActiveNavLink();
            const photoModal = document.getElementById('photoModal');
            if (photoModal) {
                photoModal.addEventListener('click', (e) => {
                    if (e.target === photoModal) closePhotoModal();
                });
            }
            const mapModal = document.getElementById('mapModal');
            if (mapModal) {
                mapModal.addEventListener('click', (e) => {
                    if (e.target === mapModal) closeMapModal();
                });
            }
        });
    



        // Survey data - optimized structure
         surveyData = [
            {name: "Jagyura Naula", gramPanchayat: "Gram Panchayat: Jagyura", latitude: 29.7470750000, longitude: 79.7430277778, height: "N/A", discharge: "N/A", photos: ["images/Jagyura/Naula/Photo-1.jpg","images/Jagyura/Naula/Photo-2.jpg","images/Jagyura/Naula/Photo-3.jpg","images/Jagyura/Naula/Photo-4.jpg","images/Jagyura/Naula/Photo-5.jpg","images/Jagyura/Naula/Photo-6.jpg","images/Jagyura/Naula/Photo-7.jpg","images/Jagyura/Naula/Photo-8.jpg","images/Jagyura/Naula/Photo-9.jpg","images/Jagyura/Naula/Photo-10.jpg","images/Jagyura/Naula/Photo-11.jpg","images/Jagyura/Naula/Photo-12.jpg"]},
            {name: "Jagyura Spring", gramPanchayat: "Gram Panchayat: Jagyura", latitude: 29.746872, longitude: 79.743783, height: "1228m", discharge: "N/A", photos: ["images/Jagyura/Spring/Photo-1.jpg","images/Jagyura/Spring/Photo-2.jpg","images/Jagyura/Spring/Photo-3.jpg","images/Jagyura/Spring/Photo-4.jpg"]},
            {name: "Gurlia Naula", gramPanchayat: "Gram Panchayat: Gorigad", latitude: 29.743352, longitude: 79.742864, height: "1278m", discharge: "0.0167 liter/second", photos: ["images/Gurlia/Photo-1.jpg","images/Gurlia/Photo-2.jpg","images/Gurlia/Photo-3.jpg","images/Gurlia/Photo-4.jpg","images/Gurlia/Photo-5.jpg","images/Gurlia/Photo-6.jpg","images/Gurlia/Photo-7.jpg","images/Gurlia/Photo-8.jpg","images/Gurlia/Photo-9.jpg","images/Gurlia/Photo-10.jpg","images/Gurlia/Photo-11.jpg","images/Gurlia/Photo-12.jpg","images/Gurlia/Photo-13.jpg","images/Gurlia/Photo-14.jpg","images/Gurlia/Photo-15.jpg","images/Gurlia/Photo-16.jpg","images/Gurlia/Photo-17.jpg","images/Gurlia/Photo-18.jpg","images/Gurlia/Photo-19.jpg","images/Gurlia/Photo-20.jpg","images/Gurlia/Photo-21.jpg","images/Gurlia/Photo-22.jpg","images/Gurlia/Photo-23.jpg","images/Gurlia/Photo-24.jpg"]},
            {name: "Dhargad Dhara", gramPanchayat: "Gram Panchayat: Panch Dev Gaon", latitude: 29.7410555556, longitude: 79.7406361111, height: "1364m", discharge: "0.333 liter/second", photos: ["images/Dhargad/Photo-1.jpg","images/Dhargad/Photo-2.jpg","images/Dhargad/Photo-3.jpg","images/Dhargad/Photo-4.jpg","images/Dhargad/Photo-5.jpg","images/Dhargad/Photo-6.jpg","images/Dhargad/Photo-7.jpg","images/Dhargad/Photo-8.jpg","images/Dhargad/Photo-9.jpg"]},
            {name: "Salia Naula", gramPanchayat: "Gram Panchayat: Okhali Sirot", latitude: 29.7424897, longitude: 79.1561147, height: "1258m", discharge: "0.0833 liter/second", photos: ["images/Salia/Photo-1.jpg","images/Salia/Photo-2.jpg","images/Salia/Photo-3.jpg","images/Salia/Photo-4.jpg","images/Salia/Photo-5.jpg","images/Salia/Photo-6.jpg","images/Salia/Photo-7.jpg","images/Salia/Photo-8.jpg","images/Salia/Photo-9.jpg","images/Salia/Photo-10.jpg","images/Salia/Photo-11.jpg","images/Salia/Photo-12.jpg","images/Salia/Photo-13.jpg","images/Salia/Photo-14.jpg","images/Salia/Photo-15.jpg"]},
            {name: "KARALA Naula", gramPanchayat: "Gram Panchayat: Karala", latitude: "No Data Available", longitude: "No Data Available", height: "No Data Available", discharge: "No Data Available", photos: ["No Data Available"]},
            {name: "MASKHET NAULA", gramPanchayat: "Gram Panchayat: Okhali Sirot", latitude: 29.744033, longitude: 79.754194, height: "1257m", discharge: "0.455 liter/second", photos: ["images/Muskhet/Photo-1.jpg","images/Muskhet/Photo-2.jpg","images/Muskhet/Photo-3.jpg","images/Muskhet/Photo-4.jpg","images/Muskhet/Photo-5.jpg","images/Muskhet/Photo-6.jpg","images/Muskhet/Photo-7.jpg","images/Muskhet/Photo-8.jpg","images/Muskhet/Photo-9.jpg"]},
            {name: "GHAR MATI DHARA (Bhaluda Tok)", gramPanchayat: "Gram Panchayat: Khol Seer", latitude: "No Data Available", longitude: "No Data Available", height: "No Data Available", discharge: "0.1667 liters per second", photos: ["images/Ghar_Mata/Photo-1.jpg","images/Ghar_Mata/Photo-2.jpg","images/Ghar_Mata/Photo-3.jpg","images/Ghar_Mata/Photo-4.jpg","images/Ghar_Mata/Photo-5.jpg","images/Ghar_Mata/Photo-6.jpg","images/Ghar_Mata/Photo-7.jpg","images/Ghar_Mata/Photo-8.jpg","images/Ghar_Mata/Photo-9.jpg","images/Ghar_Mata/Photo-10.jpg","images/Ghar_Mata/Photo-11.jpg","images/Ghar_Mata/Photo-12.jpg","images/Ghar_Mata/Photo-13.jpg","images/Ghar_Mata/Photo-14.jpg","images/Ghar_Mata/Photo-15.jpg","images/Ghar_Mata/Photo-16.jpg","images/Ghar_Mata/Photo-17.jpg","images/Ghar_Mata/Photo-18.jpg","images/Ghar_Mata/Photo-19.jpg"]},
            {name: "KATTURA DHARA (Raingaria Tok)", gramPanchayat: "Gram Panchayat: Sainj", latitude: "No Data Available", longitude: "No Data Available", height: "No Data Available", discharge: "0.05 liters per second", photos: ["images/Kattura/Photo-1.jpg","images/Kattura/Photo-2.jpg","images/Kattura/Photo-3.jpg","images/Kattura/Photo-4.jpg","images/Kattura/Photo-5.jpg","images/Kattura/Photo-6.jpg","images/Kattura/Photo-7.jpg","images/Kattura/Photo-8.jpg","images/Kattura/Photo-9.jpg","images/Kattura/Photo-10.jpg","images/Kattura/Photo-11.jpg","images/Kattura/Photo-12.jpg","images/Kattura/Photo-13.jpg","images/Kattura/Photo-14.jpg","images/Kattura/Photo-15.jpg","images/Kattura/Photo-16.jpg","images/Kattura/Photo-17.jpg","images/Kattura/Photo-18.jpg"]},
            {name: "NAVAVA DAN GADHERA DHARA", gramPanchayat: "Gram Panchayat: Sainj", latitude: "No Data Available", longitude: "No Data Available", height: "No Data Available", discharge: "No Data Available", photos: ["https://via.placeholder.com/800x600/fdcb6e/ffffff?text=Gairigad+Naula+1", "https://via.placeholder.com/800x600/e17055/ffffff?text=Gairigad+Naula+2"]},
            {name: "GHORA NAULA", gramPanchayat: "Gram Panchayat: Baidi Baghar ", latitude: "No Data Available", longitude: "No Data Available", height: "No Data Available", discharge: "0.1111 liters per second", photos: ["images/Ghora/Photo-1.jpg","images/Ghora/Photo-2.jpg","images/Ghora/Photo-3.jpg","images/Ghora/Photo-4.jpg","images/Ghora/Photo-5.jpg","images/Ghora/Photo-6.jpg","images/Ghora/Photo-7.jpg","images/Ghora/Photo-8.jpg","images/Ghora/Photo-9.jpg","images/Ghora/Photo-10.jpg","images/Ghora/Photo-11.jpg","images/Ghora/Photo-12.jpg","images/Ghora/Photo-13.jpg","images/Ghora/Photo-14.jpg","images/Ghora/Photo-15.jpg","images/Ghora/Photo-16.jpg","images/Ghora/Photo-17.jpg","images/Ghora/Photo-18.jpg"]},
            {name: "PARKHRT NAULA (Shanti Garh)", gramPanchayat: "Gram Panchayat: Parkhet Tok ", latitude: "No Data Available", longitude: "No Data Available", height: "No Data Available", discharge: "No Data Available", photos: ["https://via.placeholder.com/800x600/fab1a0/ffffff?text=Kosi+Valley+1", "https://via.placeholder.com/800x600/ff7675/ffffff?text=Kosi+Valley+2"]}
        ];

        // Theme management
         toggleTheme = () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            document.querySelector('.theme-icon').textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        };

         loadTheme = () => {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.querySelector('.theme-icon').textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        };

        // Navigation active link
         updateActiveNavLink = () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');
            let currentSection = '';

            sections.forEach(section => {
                if (window.pageYOffset >= (section.offsetTop - 100)) {
                    currentSection = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${currentSection}`) {
                    link.classList.add('active');
                }
            });
        };

        // Modal state
         currentCardData = null;
         currentPhotoIndex = 0;
         map = null;

        // Gallery generation
         generateGallery = () => {
            const container = document.getElementById('carouselContainer');
            if (!container) return;

            container.innerHTML = surveyData.map((data, index) => {
                const hasCoordinates = data.latitude !== null && data.longitude !== null && data.latitude !== "No Data Available";
                const mapButtonDisabled = !hasCoordinates ? 'disabled' : '';

                return `
                    <div class="naula-card" data-tilt data-tilt-max="15" data-tilt-speed="400" data-tilt-perspective="1000" data-tilt-scale="1.05" data-tilt-glare data-tilt-max-glare="0.3">
                        <div class="card-header">
                            <h2 class="card-title">${data.name}</h2>
                            <p class="card-subtitle">üìç ${data.gramPanchayat}</p>
                        </div>
                        <div class="card-body">
                            <div class="info-row">
                                <span class="info-label">Latitude:</span>
                                <span class="info-value">${data.latitude !== null ? data.latitude : 'N/A'}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Longitude:</span>
                                <span class="info-value">${data.longitude !== null ? data.longitude : 'N/A'}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Height:</span>
                                <span class="info-value">${data.height}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Discharge:</span>
                                <span class="info-value">${data.discharge}</span>
                            </div>
                        </div>
                        <div class="card-buttons">
                            <button class="view-photos-btn" onclick="openPhotoModal(${index})">üì∏ Photos</button>
                            <button class="view-map-btn" onclick="openMapModal(${index})" ${mapButtonDisabled}>üó∫Ô∏è Map</button>
                        </div>
                    </div>
                `;
            }).join('');

            // Initialize Vanilla Tilt
            VanillaTilt.init(document.querySelectorAll('.naula-card'), {
                reverse: false,
                max: 15,
                speed: 400,
                perspective: 1000,
                scale: 1.05,
                transition: true,
                glare: true,
                'max-glare': 0.3,
                gyroscope: true
            });
        };

        // Photo modal functions
         openPhotoModal = (index) => {
            currentCardData = surveyData[index];
            currentPhotoIndex = 0;
            document.getElementById('modalTitle').textContent = currentCardData.name;
            document.getElementById('modalMetadata').textContent = `${currentCardData.gramPanchayat} | Survey Date: 8th Oct 2025`;
            updateModalImage();
            document.getElementById('photoModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        };

         closePhotoModal = () => {
            document.getElementById('photoModal').classList.remove('show');
            document.body.style.overflow = 'auto';
        };

         updateModalImage = () => {
            if (!currentCardData) return;
            const modalImage = document.getElementById('modalImage');
            modalImage.src = currentCardData.photos[currentPhotoIndex];
            modalImage.alt = `${currentCardData.name} - Photo ${currentPhotoIndex + 1}`;
            document.getElementById('photoCounter').textContent = `Photo ${currentPhotoIndex + 1} of ${currentCardData.photos.length}`;
        };

         navigatePhotos = (direction) => {
            if (!currentCardData) return;
            currentPhotoIndex = (currentPhotoIndex + direction + currentCardData.photos.length) % currentCardData.photos.length;
            updateModalImage();
        };

        // Map modal functions
         openMapModal = (index) => {
            const data = surveyData[index];
            if (data.latitude === null || data.longitude === null || data.latitude === "No Data Available") {
                alert('GPS coordinates not available for this location.');
                return;
            }

            document.getElementById('mapModalTitle').textContent = data.name;
            document.getElementById('mapModalMetadata').textContent = `${data.gramPanchayat} | Coordinates: ${data.latitude}, ${data.longitude}`;
            document.getElementById('mapModal').classList.add('show');
            document.body.style.overflow = 'hidden';

            setTimeout(() => initializeMap(data), 100);
        };

         closeMapModal = () => {
            document.getElementById('mapModal').classList.remove('show');
            document.body.style.overflow = 'auto';
            if (map) {
                map.remove();
                map = null;
            }
        };

         initializeMap = (data) => {
            if (map) map.remove();

            const mapContainer = document.getElementById('mapContainer');
            mapContainer.innerHTML = '';
            map = L.map('mapContainer').setView([data.latitude, data.longitude], 15);

            const baseMaps = {
                "Street Map": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }),
                "Satellite": L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { maxZoom: 19 }),
                "Topographic": L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', { maxZoom: 17 }),
                "Terrain": L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png', { maxZoom: 18 }),
                "Dark Mode": L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { maxZoom: 19 }),
                "Light Mode": L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { maxZoom: 19 })
            };

            baseMaps["Street Map"].addTo(map);
            L.control.layers(baseMaps, null, { position: 'topright', collapsed: false }).addTo(map);

            const customIcon = L.icon({
                iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
                shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            });

            const popupContent = `
                <div class="map-popup-content">
                    <h3>${data.name}</h3>
                    <p><strong>Gram Panchayat:</strong> ${data.gramPanchayat}</p>
                    <p><strong>Coordinates:</strong> ${data.latitude}, ${data.longitude}</p>
                    <p><strong>Elevation:</strong> ${data.height}</p>
                    <p><strong>Discharge:</strong> ${data.discharge}</p>
                </div>
            `;

            L.marker([data.latitude, data.longitude], { icon: customIcon }).addTo(map).bindPopup(popupContent).openPopup();
            L.circle([data.latitude, data.longitude], { 
                color: '#00cec9', 
                fillColor: '#74b9ff', 
                fillOpacity: 0.2, 
                radius: 100 
            }).addTo(map);
        };

        // Search functionality
         setupSearch = () => {
            const searchInput = document.getElementById('searchInput');
            if (!searchInput) return;

            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                document.querySelectorAll('.naula-card').forEach(card => {
                    const title = card.querySelector('.card-title').textContent.toLowerCase();
                    const gramPanchayat = card.querySelector('.card-subtitle').textContent.toLowerCase();
                    card.style.display = (title.includes(searchTerm) || gramPanchayat.includes(searchTerm)) ? 'block' : 'none';
                });
            });
        };

        // Contact form
         setupContactForm = () => {
            const form = document.getElementById('contactForm');
            if (!form) return;

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Thank you for your message! We will get back to you soon.');
                form.reset();
            });
        };

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            const photoModal = document.getElementById('photoModal');
            const mapModal = document.getElementById('mapModal');

            if (photoModal && photoModal.classList.contains('show')) {
                if (e.key === 'Escape') closePhotoModal();
                else if (e.key === 'ArrowLeft') navigatePhotos(-1);
                else if (e.key === 'ArrowRight') navigatePhotos(1);
            }

            if (mapModal && mapModal.classList.contains('show') && e.key === 'Escape') {
                closeMapModal();
            }
        });

        // Initialize on DOM load
        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            generateGallery();
            setupSearch();
            setupContactForm();
            updateActiveNavLink();

            // Modal click outside to close
            ['photoModal', 'mapModal'].forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            modalId === 'photoModal' ? closePhotoModal() : closeMapModal();
                        }
                    });
                }
            });
        });

        // Scroll event listener
        window.addEventListener('scroll', updateActiveNavLink);
    